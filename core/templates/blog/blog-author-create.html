{% extends "base_blog.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %} {{title}} {% endblock %}

{% block content %}
<div class="container">

    <div class="col-md-12 col-md-offset-2">

        <h1 class="text-center">{{title}}</h1>
        <div class="blog-images text-center ">
            <img class="post-image clickable" onclick="document.getElementById('imgInp').click()"
                src=" "
                alt="" id="postimg">
        </div>

        <form action="{% url 'blog:blog-create' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="text" name="author" value="{{request.user.profile.id}}"hidden >
            <input name="image" accept="image/*" type='file' id="imgInp" hidden>
            <div class="form-group">
                <div class="row">
                    <div class="col-9">
                        {{form.title|as_crispy_field}}
                    </div>
                    <div class="col-3 text-center">
                        {{form.categories|as_crispy_field}}
                    </div>
                </div>
            </div>
          
            <div class="form-group">
             
                {{form.snippet|as_crispy_field}}
            </div>

            <div class="form-group">
              
                {{form.content|as_crispy_field}}
            </div>

            <hr class="bold" >

            <div class="form-group">
                {{form.author_note|as_crispy_field}}
            </div>


            <div class="form-group text-center">
                <button type="submit" class="btn btn-primary mb-2">
                    Create
                </button>

            </div>
        </form>
    </div>


</div>

{{form.errors}}

{% endblock %}
{% block script %}
<script>
    imgInp.onchange = evt => {
        const [file] = imgInp.files
        if (file) {
            postimg.src = URL.createObjectURL(file)
        }
    }
</script>
{% endblock %}